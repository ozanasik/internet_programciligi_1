document.addEventListener("DOMContentLoaded", () => {

  let cart = [];
  const cartCount = document.getElementById("cartCount");
  const buySection = document.getElementById("buySection");
  const message = document.getElementById("message");
  const cartList = document.getElementById("cartList");

  // SEPETE EKLE
  document.querySelectorAll(".add-cart").forEach(btn => {
    btn.addEventListener("click", () => {
      const productName = btn.parentElement.querySelector("h6").innerText;
      cart.push(productName);
      updateCart();
    });
  });

  // SEPETÄ° GÃœNCELLE
  function updateCart() {
    cartCount.innerText = cart.length;
    cartList.innerHTML = "";

    cart.forEach((item, index) => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        ${item}
        <button class="btn btn-sm btn-danger">Sil</button>
      `;

      // SÄ°L BUTONU
      li.querySelector("button").addEventListener("click", () => {
        cart.splice(index, 1);
        updateCart();
      });

      cartList.appendChild(li);
    });

    if (cart.length > 0) {
      buySection.classList.remove("d-none");
    } else {
      buySection.classList.add("d-none");
    }
  }

  // SATIN AL
  document.getElementById("buyBtn").addEventListener("click", () => {
    message.innerText = "SipariÅŸiniz alÄ±ndÄ±, iyi gÃ¼nler dileriz ðŸ˜Š";
    message.classList.remove("d-none");
    clearCart();
  });

  // BAÄžIÅž YAP
  document.getElementById("donateBtn").addEventListener("click", () => {
    message.innerText =
      "BaÄŸÄ±ÅŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz ðŸ™ Bilgisayarlar okullara ulaÅŸtÄ±rÄ±lacaktÄ±r.";
    message.classList.remove("d-none");
    clearCart();
  });

  function clearCart() {
    cart = [];
    updateCart();
  }

  // YAPILACAKLAR / NOTLAR
  document.getElementById("taskAdd").addEventListener("click", () => {
    const input = document.getElementById("taskInput");
    if (!input.value) return;

    const li = document.createElement("li");
    li.className = "list-group-item d-flex justify-content-between";
    li.innerHTML = `${input.value} <button class="btn btn-sm btn-danger">Sil</button>`;

    li.querySelector("button").onclick = () => li.remove();
    document.getElementById("taskList").appendChild(li);
    input.value = "";
  });

});
